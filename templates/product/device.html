{% extends 'base.html' %}
{% block body_part %}
<div class="layui-side layui-bg-black">
    <!-- 左侧导航 -->
    <div class="layui-side-scroll">
      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item"><a href="{{ url_for('home') }}">主页</a></li>
        <li class="layui-nav-item"><a href="{{ url_for('product') }}">产品分类</a></li>
        <li class="layui-nav-item"><a href="{{ url_for('device') }}">设备列表</a></li>
        <li class="layui-nav-item"><a href="{{ url_for('alarm') }}">警报信息</a></li>
      </ul>
    </div>
  </div>
  <!-- 表格显示 -->
  <!-- 含有数据操作 -->
  <div class="layui-body">
    <div class="layui-fluid">
      <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <table class="layui-hide" id="table-device" lay-filter="table-device"></table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/html" id="operate-bar">
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail" href="{{ url_for('event') }}">查看</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del" href="">删除</a>
  </script>
{% endblock %}

{% block your_script %}
<script>
  layui.use(['table','layer'], function(){
    var table = layui.table
    ,layer =layui.layer;

    
    //表格实例
    table.render({
      elem: '#table-device'
      ,url: '/query_device' //数据接口
      ,cellMinWidth: 120
      ,cols: [[ //表头
        {field: 'deviceName', title: '设备名', align: 'center'}
        ,{field: 'deviceId', title: '设备ID', align: 'center'}
        ,{field: 'productId', title: '产品ID', align: 'center'}
        ,{field: 'createTime', title: '创建时间', align: 'center'} 
        ,{field: 'onlineAt', title: '上线时间', align: 'center'}
        ,{field: 'updateTime', title: '更新时间', align: 'center'}
        ,{align: 'center', toolbar: '#operate-bar', title: '操作', align: 'center'}
      ]]
    });

  //   table.on('tool(table-device)', function(obj){
  //   var data_device = obj.data //获得当前行数据
  //   ,layEvent = obj.event; //获得 lay-event 对应的值
  //   if(layEvent === 'del'){
  //     $.ajax({
  //       type: 'post'
  //       ,async: false
  //       ,url: '/delete'
  //       ,data: data_device
  //       ,success: function(result) {
  //         alert(result)
  //       }
  //     })
  //   }
  // });

  });
  </script>
{% endblock %}