{% extends 'base.html' %}
{% block body_part %}
<div class="layui-side layui-bg-black">
  <!-- 左侧导航 -->
  <div class="layui-side-scroll">
    <ul class="layui-nav layui-nav-tree"  lay-filter="test">
      <li class="layui-nav-item"><a href="{{ url_for('home') }}">主页</a></li>
      <li class="layui-nav-item"><a href="{{ url_for('product') }}">产品分类</a></li>
      <li class="layui-nav-item"><a href="{{ url_for('device') }}">设备列表</a></li>
      <li class="layui-nav-item"><a href="{{ url_for('alarm') }}">警报信息</a></li>
    </ul>
  </div>
</div>
<!-- 表格显示 -->
<!-- 含有数据操作 -->
<div class="layui-body">
  <div class="layui-fluid">
    <div class="layui-row layui-col-space15">
      <div class="layui-col-md12">
        <div class="layui-card">
          <div class="layui-card-body">
            <table class="layui-hide" id="table-product" lay-filter="table-product"></table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>  
<script type="text/html" id="operate-bar">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
{% endblock %}

{% block your_script %}
<script>
  layui.use('table', function(){
    var table = layui.table;
    
    //表格实例
    table.render({
      elem: '#table-product'
      ,url: '/query_product' //数据接口
      ,cellMinWidth: 120
      ,cols: [[ //表头
        {field: 'productId', title: '产品ID', align: 'center'}
        ,{field: 'productName', title: '产品名', align: 'center'}
        ,{field: 'createTime', title: '创建时间', align: 'center'}
        ,{field: 'deviceCount', title: '设备数量', align: 'center'}
        ,{field: 'thirdTypeValue', title: '类别', align: 'center'}
        ,{align: 'center', toolbar: '#operate-bar', title: '操作', align: 'center'}
      ]]
    });

    //监听行工具事件
    table.on('tool(table-product)', function(obj){
      var data = obj.data;
      var layEvent = obj.event;
      if(layEvent == 'detail'){
        layer.msg('查看操作'); //需要弹出一个小窗口显示具体信息
      } else if(layEvent == 'del'){
        layer.confirm('确定删除吗？',function(index){
          obj.del();
          layer.close(index);
        });
      }
    });
  });
</script>
{% endblock %}
